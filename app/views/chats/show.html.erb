<div class="chat-container">
  <div class="messages-list">
    <% @messages.each do |message| %>
      <div class="message-row <%= message.sender_type.downcase == 'trainer' ? 'trainer-message' : 'user-message' %>">
        <div class="message-content">
          <div class="profile-image">
            <% if message.sender_type == 'Trainer' %>
              <%= image_tag message.chat.trainer.profile_image, alt: 'Trainer', class: 'profile-img' %>
            <% else %>
              <%= image_tag message.chat.user.profile_image, alt: 'User', class: 'profile-img' %>
            <% end %>
          </div>
          <div class="bubble">
            <p><%= message.content %></p>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <div class="message-form">
    <%= form_with(model: [@chat, @message], remote: true, html: { class: 'new_message' }) do |f| %>
      <%= f.text_area :content, placeholder: 'メッセージを入力...', class: 'message-input' %>
      <%= f.submit '送信', class: 'send-button' %>
    <% end %>
  </div>
</div>
